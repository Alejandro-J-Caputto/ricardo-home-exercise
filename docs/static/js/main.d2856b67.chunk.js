(this["webpackJsonpricardo-home-exercise"]=this["webpackJsonpricardo-home-exercise"]||[]).push([[0],{31:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var a=c(1),r=c.n(a),s=c(17),n=c.n(s),i=(c(31),c(5)),l=c(4),o=c(0),j=function(e){return Object(o.jsx)(o.Fragment,{children:e.children})},d=function(e){return Object(o.jsx)("div",{className:"ricardo-wrapper",children:e.children})},b=c.p+"static/media/logo.fb22ea0d.svg",u=function(){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("div",{className:"logo",children:Object(o.jsx)(i.b,{to:"/home-exercise",className:"logo-link",children:Object(o.jsx)("img",{className:"logo__svg",src:b,alt:"ricardo logo"})})}),Object(o.jsx)("nav",{className:"nav",children:Object(o.jsxs)("ul",{className:"nav-list",children:[Object(o.jsx)(i.c,{to:"/home-exercise",activeClassName:"active-link",className:"nav-item",exact:!0,children:Object(o.jsx)("span",{children:"HOME"})}),Object(o.jsx)(i.c,{to:"/home-exercise/merkliste/saved",activeClassName:"active-link",className:"nav-item",children:"WHISHLIST"})]})})]})},h=function(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"HELLO LOGIN"})})},m=function(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"HELLO REGISTER"})})},O=function(e){return Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{exact:!0,path:"/auth/login",component:h}),Object(o.jsx)(l.b,{exact:!0,path:"/auth/register",component:m}),Object(o.jsx)(l.b,{exact:!0,path:"*",children:Object(o.jsx)(l.a,{to:"/home-exercise"})})]})},x=c(6),p=c(24),f=function(e){var t=Object(l.g)(),c=Object(a.useState)(""),r=Object(p.a)(c,2),s=r[0],n=r[1],i=Object(a.useState)(!1),j=Object(p.a)(i,2),d=j[0],b=j[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){b(s.trim().length>3)}),500);return function(){clearInterval(e)}}),[s]),Object(o.jsx)("div",{className:"searchBar",children:Object(o.jsxs)("form",{className:"searchBar-group",children:[Object(o.jsx)("input",{onChange:function(e){n(e.target.value)},type:"text",name:"search",id:"search",placeholder:"Search Article",className:"searchBar-group__input",autoComplete:"off"}),Object(o.jsx)("label",{htmlFor:"search",className:"searchBar-group__label",children:"Search Article"}),Object(o.jsxs)("button",{onClick:function(e){e.preventDefault(),t.push("/home-exercise/search/".concat(s))},className:"btn btn-search",disabled:!d,children:[Object(o.jsx)("i",{className:"fas fa-search"}),Object(o.jsx)("span",{children:"Search"})]})]})})},v=c(7),g=c.n(v),N=c(12),I=function(){var e=Object(N.a)(g.a.mark((function e(t,c){var a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://www.ricardo.ch/api/frontend/recruitment","/").concat(t.endpoint,"?").concat(t.params,"&apiToken=").concat("e8b913ebd94348c8f9a21b8f51585e7f3855bbe2"),{method:t.method,headers:t.headers?t.headers:[],body:t.body?t.body:null});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("There was a problem with the request");case 6:return e.next=8,a.json();case 8:return r=e.sent,c&&c(r),e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,c){return e.apply(this,arguments)}}(),S="[Articles] Fetch Articles by param",y="[Articles] Fetch an article by ID",_="[Articles] User seller by ID",k="[Article] Store ID Localstorage",T="[Article] Store ITEM Localstorage",w="[UI] Loads while check the current token",E="[UI] For small operations",L=function(){return{type:E,payload:null}},D=function(){return function(){var e=Object(N.a)(g.a.mark((function e(t){var c,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("selectedItems")&&localStorage.getItem("itemsDBLocal")){e.next=2;break}return e.abrupt("return");case 2:c=JSON.parse(localStorage.getItem("selectedItems")),a=JSON.parse(localStorage.getItem("itemsDBLocal")),t(H(c)),t(J(a));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return{type:S,payload:e}},C=function(e){return{type:y,payload:e}},A=function(e){return{type:_,payload:e}},H=function(e){return{type:k,payload:e}},J=function(e){return{type:T,payload:e}},P=function(e){var t=Object(a.useRef)(null),c=Object(l.h)().articleId,r=Object(x.b)(),s=Object(x.c)((function(e){return e.articles})),n=Object(x.c)((function(e){return e.uiLoading})).loadingHTTP,i=s.sellerById,j=s.articlesById,d=Object(a.useCallback)((function(e){e&&null!==t.current&&(t.current.innerHTML=e)}),[t]);return Object(a.useEffect)((function(){var e;r((e=c,function(){var t=Object(N.a)(g.a.mark((function t(c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(L()),t.prev=1,t.next=4,I({endpoint:"article-details",params:"articleId=".concat(e),method:"GET"}).then(function(){var e=Object(N.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I({endpoint:"user",params:"userId=".concat(t.sellerId),method:"GET"},(function(e){var a=e;c(C(t)),c(A(a)),c(L())}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.warn(t.t0),c(L());case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()))}),[c,r]),Object(a.useEffect)((function(){n||d(j.descriptionHtml)}),[j.descriptionHtml,d,n]),Object(o.jsx)("div",{className:"container",children:n?Object(o.jsx)("div",{className:"spinner"}):Object(o.jsxs)("div",{className:"card",children:[Object(o.jsx)("div",{className:"card-container",children:Object(o.jsx)("img",{src:j.imageUrl,alt:"test",className:"card-container__image"})}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("div",{className:"card-body__title",children:Object(o.jsx)("h2",{children:j.title})}),Object(o.jsx)("div",{className:"card-body__info",children:Object(o.jsxs)("div",{className:"",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{children:" Seller:"})," ",i.name]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{children:" Price: "}),j.price," CHF"]})]})}),Object(o.jsx)("div",{ref:t,className:"card-body__description"})]})]})})},F=c(3),M=function(e){var t=e.itemsContent,c=t.buyNowPrice,a=t.endDate,r=t.id,s=t.imageUrl,n=t.title,l=new Date(a).toISOString().split("T"),j=l[0],d=l[1].slice(0,5);return Object(o.jsxs)("div",{className:"article","data-id":r,children:[Object(o.jsxs)("div",{className:"article-head",children:[Object(o.jsx)("div",{className:"article-head__flag",children:Object(o.jsx)("i",{onClick:function(){return e.onSelect("".concat(r),Object(F.a)({},e.itemsContent))},className:e.selected?"fas fa-flag red":"far fa-flag"})}),Object(o.jsx)("img",{src:s,alt:"test article",className:"article-head__img"})]}),Object(o.jsxs)("div",{className:"article-body",children:[Object(o.jsx)("div",{className:"article-body__title",children:Object(o.jsx)("p",{className:"heading-article",children:n})}),Object(o.jsxs)("div",{className:"article-body__date",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{children:"Ending on:"}),Object(o.jsx)("span",{children:j})]}),Object(o.jsx)("p",{children:Object(o.jsx)("span",{children:d})})]}),Object(o.jsxs)("div",{className:"article-body__price",children:[Object(o.jsx)("div",{className:"price",children:c?Object(o.jsxs)("p",{children:[c," CHF"]}):Object(o.jsx)("p",{children:"Keine preis"})}),Object(o.jsx)(i.b,{className:"btn btn-card",to:"/home-exercise/article/".concat(r),children:"See More"})]})]})]})},U=function(e){var t=e.items,c=e.isLoading,r=Object(x.b)(),s=function(e){r(function(e){return function(){var t=Object(N.a)(g.a.mark((function t(c){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.getItem("itemsDBLocal")?((a=JSON.parse(localStorage.getItem("itemsDBLocal"))).push(e),localStorage.setItem("itemsDBLocal",JSON.stringify(a)),c(J(a))):((a=[]).push(e),localStorage.setItem("itemsDBLocal",JSON.stringify(a)),c(J(a)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},n=Object(x.c)((function(e){return e.articles.savedArticlesIDs})),i=function(e,t){r(function(e,t){return function(){var c=Object(N.a)(g.a.mark((function c(a){var r,s;return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:localStorage.getItem("selectedItems")||localStorage.getItem("selectedItems")?((r=JSON.parse(localStorage.getItem("selectedItems"))).push(e),localStorage.setItem("selectedItems",JSON.stringify(r)),(s=JSON.parse(localStorage.getItem("itemsDBLocal"))).push(t),localStorage.setItem("itemsDBLocal",JSON.stringify(s)),a(H(r)),a(J(s))):((r=[]).push(e),localStorage.setItem("selectedItems",JSON.stringify(r)),(s=[]).push(t),localStorage.setItem("itemsDBLocal",JSON.stringify(s)),a(J(s)));case 1:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(e,t))};return Object(a.useEffect)((function(){r(D())}),[r]),Object(o.jsxs)(o.Fragment,{children:[c?null:Object(o.jsxs)("p",{className:"count-result",children:["Total Count: ",t.length+1," "]}),Object(o.jsx)("div",{className:"articles-grid",children:c?Object(o.jsx)("div",{className:"spinner"}):t.map((function(e){return Object(o.jsx)(M,{itemsContent:e,onSelect:i,onStoreItem:s,selected:!!n.includes("".concat(e.id))},e.id)}))})]})},R=function(e){var t=Object(l.h)().searchText,c=Object(x.b)(),r=Object(x.c)((function(e){return e.articles})),s=Object(x.c)((function(e){return e.uiLoading})).loadingHTTP,n=r.articles;return Object(a.useEffect)((function(){var e;c((e=t,function(){var t=Object(N.a)(g.a.mark((function t(c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(L()),t.next=4,I({endpoint:"search",params:"searchText=".concat(e),method:"GET"},(function(e){c(B(e.articles)),c(L())}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0),c(L());case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,c]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("section",{className:"container",children:Object(o.jsx)(U,{items:n,isLoading:s})})})},G=function(){return Object(o.jsx)("h1",{children:"Saved Articles"})},K=function(e){var t=e.itemsContent,c=t.id,a=t.title,r=t.buyNowPrice,s=t.endDate,n=t.imageUrl;return Object(o.jsxs)("li",{className:"marked-item","data-id":c,children:[Object(o.jsx)("div",{className:"marked-item__img",children:Object(o.jsx)("img",{src:n,alt:"marked pic"})}),Object(o.jsx)("div",{className:"marked-item__title",children:Object(o.jsx)("h2",{children:a})}),Object(o.jsxs)("div",{className:"marked-item__date",children:[Object(o.jsx)("h3",{children:"STATUS"}),Object(o.jsxs)("p",{children:["date: ",s]})]}),Object(o.jsxs)("div",{className:"marked-item__price",children:[Object(o.jsx)("h3",{children:"PRICE"}),Object(o.jsx)("p",{children:r||"Keine Preis"})]}),Object(o.jsx)("div",{className:"marked-item__unselect",children:Object(o.jsx)("i",{className:"fas fa-flag"})})]})},W=function(){var e=Object(x.c)((function(e){return e.articles})).selectedItemsLocalStorage;return console.log(e),Object(o.jsx)("ul",{className:"marked-items__list",children:e.map((function(e){return Object(o.jsx)(K,{itemsContent:e},e.id)}))})},V=function(){return Object(o.jsx)("nav",{className:"merkliste-nav",children:Object(o.jsxs)("ul",{className:"merkliste-nav__list",children:[Object(o.jsx)(i.c,{activeClassName:"active-link",className:"merkliste-nav__list-item",to:"/home-exercise/merkliste/saved",children:Object(o.jsx)("span",{children:"ARTICLES"})}),Object(o.jsx)(i.c,{activeClassName:"active-link",className:"merkliste-nav__list-item",to:"/home-exercise/merkliste/visited",children:Object(o.jsx)("span",{children:"VISITED"})})]})})},X=function(){return Object(o.jsx)("div",{className:"container-centered",children:Object(o.jsxs)("div",{className:"merkliste",children:[Object(o.jsx)("div",{className:"merkliste-heading",children:Object(o.jsx)("h1",{children:"MEINE MERKLISTE"})}),Object(o.jsx)(V,{}),Object(o.jsx)("div",{children:Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{exact:!0,path:"/home-exercise/merkliste/saved",component:W}),Object(o.jsx)(l.b,{exact:!0,path:"/home-exercise/merkliste/visited",component:G})]})})]})})},q=function(){return Object(o.jsx)("h1",{children:"SOMETHING WENT WRONG"})},z=function(e){var t=Object(x.b)();return Object(a.useEffect)((function(){t(D())}),[t]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{path:"/",exact:!0,children:Object(o.jsx)(l.a,{to:"/home-exercise"})}),Object(o.jsx)(l.b,{path:"/home-exercise/merkliste",children:Object(o.jsx)(X,{})}),Object(o.jsx)(l.b,{exact:!0,path:"/home-exercise",children:Object(o.jsx)(f,{})}),Object(o.jsx)(l.b,{path:"/home-exercise/search/:searchText",children:Object(o.jsx)(R,{})}),Object(o.jsx)(l.b,{path:"/home-exercise/article/:articleId",children:Object(o.jsx)(P,{})}),Object(o.jsx)(l.b,{path:"*",children:Object(o.jsx)(q,{})})]})})},Q=c(16),Y=c(19),Z={articles:[],articlesById:{id:"",title:"",subtitle:"",price:0,descriptionHtml:"",imageUrl:"",sellerId:""},sellerById:{id:"",name:""},savedArticlesIDs:[],selectedItemsLocalStorage:[]},$=c(26),ee={loadingHTTP:!1,loadingApp:!1},te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.c,ce=Object(Q.b)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(F.a)(Object(F.a)({},e),{},{articles:Object(Y.a)(t.payload)});case y:return Object(F.a)(Object(F.a)({},e),{},{articlesById:Object(F.a)({},t.payload)});case _:return Object(F.a)(Object(F.a)({},e),{},{sellerById:Object(F.a)({},t.payload)});case k:return Object(F.a)(Object(F.a)({},e),{},{savedArticlesIDs:Object(Y.a)(t.payload)});case T:return Object(F.a)(Object(F.a)({},e),{},{selectedItemsLocalStorage:Object(Y.a)(t.payload)});default:return e}},uiLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(F.a)(Object(F.a)({},e),{},{loadingHTTP:!e.loadingHTTP});case w:return Object(F.a)(Object(F.a)({},e),{},{loadingApp:!e.loadingApp});default:return e}}}),ae=Object(Q.d)(ce,te(Object(Q.a)($.a))),re=function(){return Object(o.jsx)(d,{children:Object(o.jsx)(x.a,{store:ae,children:Object(o.jsx)(j,{children:Object(o.jsxs)(i.a,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{path:"/auth",component:function(e){return Object(o.jsx)(O,{routing:e})}}),Object(o.jsx)(l.b,{path:"/",component:function(e){return Object(o.jsx)(z,{routing:e})}})]})]})})})})};n.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(re,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d2856b67.chunk.js.map